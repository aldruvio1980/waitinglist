<!DOCTYPE html>
<html>
<head>
    <title>Join Waiting List</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-sm mx-auto bg-white p-6 rounded-xl shadow-md">
        <h2 class="text-xl font-bold mb-4">Join the List</h2>
        <input id="name" type="text" placeholder="Your Name" class="w-full border mb-2 p-2 rounded">
        <input id="phone" type="tel" placeholder="Your Phone" class="w-full border mb-4 p-2 rounded">
        <button onclick="joinList()" id="btn" class="w-full bg-blue-600 text-white py-2 rounded">Submit</button>
        <p id="status" class="mt-4 text-center text-sm text-gray-500"></p>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const hostID = urlParams.get('host');
        const peer = new Peer();

        function joinList() {
            const conn = peer.connect(hostID);
            conn.on('open', () => {
                conn.send({
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value
                });
                document.getElementById('status').innerText = "Added! Please wait for our text.";
                document.getElementById('btn').disabled = true;
                document.getElementById('btn').classList.add('opacity-50');
            });
        }
    </script>
</body>
</html>